{
  "nodes": [
    {
      "node_name": "user_service",
      "publishers": [
        {
          "topic_name": "user_events",
          "msg_type": "user_activity",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "BEST_EFFORT"
          }
        },
        {
          "topic_name": "user_preferences",
          "msg_type": "preference_data",
          "period_ms": 1000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "auth_service",
      "publishers": [
        {
          "topic_name": "auth_tokens",
          "msg_type": "jwt_token",
          "period_ms": 50,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "product_service",
      "publishers": [
        {
          "topic_name": "product_updates",
          "msg_type": "product_info",
          "period_ms": 500,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        },
        {
          "topic_name": "inventory_status",
          "msg_type": "stock_levels",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "cart_service",
      "subscribers": [
        { "topic_name": "user_events", "msg_type": "user_activity" },
        { "topic_name": "product_updates", "msg_type": "product_info" },
        { "topic_name": "auth_tokens", "msg_type": "jwt_token" }
      ],
      "publishers": [
        {
          "topic_name": "cart_updates",
          "msg_type": "cart_state",
          "period_ms": 200,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "order_service",
      "subscribers": [
        { "topic_name": "cart_updates", "msg_type": "cart_state" },
        { "topic_name": "payment_confirmed", "msg_type": "payment_receipt" },
        { "topic_name": "inventory_reserved", "msg_type": "reservation_info" },
        { "topic_name": "auth_tokens", "msg_type": "jwt_token" }
      ],
      "publishers": [
        {
          "topic_name": "order_placed",
          "msg_type": "order_details",
          "period_ms": 50,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        },
        {
          "topic_name": "order_fulfilled",
          "msg_type": "fulfillment_info",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "payment_service",
      "subscribers": [
        { "topic_name": "order_placed", "msg_type": "order_details" },
        { "topic_name": "auth_tokens", "msg_type": "jwt_token" }
      ],
      "publishers": [
        {
          "topic_name": "payment_request",
          "msg_type": "payment_intent",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        },
        {
          "topic_name": "payment_confirmed",
          "msg_type": "payment_receipt",
          "period_ms": 50,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "inventory_service",
      "subscribers": [
        { "topic_name": "order_placed", "msg_type": "order_details" },
        { "topic_name": "product_updates", "msg_type": "product_info" }
      ],
      "publishers": [
        {
          "topic_name": "inventory_reserved",
          "msg_type": "reservation_info",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        },
        {
          "topic_name": "stock_alerts",
          "msg_type": "low_stock_warning",
          "period_ms": 5000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "shipping_service",
      "subscribers": [
        { "topic_name": "order_fulfilled", "msg_type": "fulfillment_info" },
        { "topic_name": "warehouse_updates", "msg_type": "warehouse_status" }
      ],
      "publishers": [
        {
          "topic_name": "shipment_tracking",
          "msg_type": "tracking_info",
          "period_ms": 1000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "notification_service",
      "subscribers": [
        { "topic_name": "order_placed", "msg_type": "order_details" },
        { "topic_name": "payment_confirmed", "msg_type": "payment_receipt" },
        { "topic_name": "shipment_tracking", "msg_type": "tracking_info" },
        { "topic_name": "user_preferences", "msg_type": "preference_data" }
      ],
      "publishers": [
        {
          "topic_name": "email_queue",
          "msg_type": "email_message",
          "period_ms": 500,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT",
            "reliability": "RELIABLE"
          }
        },
        {
          "topic_name": "sms_queue",
          "msg_type": "sms_message",
          "period_ms": 500,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "BEST_EFFORT"
          }
        }
      ]
    },

    {
      "node_name": "recommendation_service",
      "subscribers": [
        { "topic_name": "user_events", "msg_type": "user_activity" },
        { "topic_name": "order_fulfilled", "msg_type": "fulfillment_info" },
        { "topic_name": "user_preferences", "msg_type": "preference_data" }
      ],
      "publishers": [
        {
          "topic_name": "recommendations",
          "msg_type": "product_recommendations",
          "period_ms": 2000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "BEST_EFFORT"
          }
        }
      ]
    },

    {
      "node_name": "analytics_service",
      "subscribers": [
        { "topic_name": "user_events", "msg_type": "user_activity" },
        { "topic_name": "order_placed", "msg_type": "order_details" },
        { "topic_name": "payment_confirmed", "msg_type": "payment_receipt" },
        { "topic_name": "cart_updates", "msg_type": "cart_state" }
      ],
      "publishers": [
        {
          "topic_name": "analytics_reports",
          "msg_type": "analytics_data",
          "period_ms": 60000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "warehouse_service",
      "subscribers": [
        { "topic_name": "inventory_reserved", "msg_type": "reservation_info" },
        { "topic_name": "stock_alerts", "msg_type": "low_stock_warning" }
      ],
      "publishers": [
        {
          "topic_name": "warehouse_updates",
          "msg_type": "warehouse_status",
          "period_ms": 5000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "fraud_detection_service",
      "subscribers": [
        { "topic_name": "payment_request", "msg_type": "payment_intent" },
        { "topic_name": "user_events", "msg_type": "user_activity" },
        { "topic_name": "order_placed", "msg_type": "order_details" }
      ],
      "publishers": [
        {
          "topic_name": "fraud_alerts",
          "msg_type": "fraud_detection_result",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "pricing_service",
      "subscribers": [
        { "topic_name": "product_updates", "msg_type": "product_info" },
        { "topic_name": "inventory_status", "msg_type": "stock_levels" }
      ],
      "publishers": [
        {
          "topic_name": "price_updates",
          "msg_type": "pricing_info",
          "period_ms": 1000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "search_service",
      "subscribers": [
        { "topic_name": "product_updates", "msg_type": "product_info" },
        { "topic_name": "price_updates", "msg_type": "pricing_info" },
        { "topic_name": "inventory_status", "msg_type": "stock_levels" }
      ],
      "publishers": [
        {
          "topic_name": "search_index_updates",
          "msg_type": "search_index_data",
          "period_ms": 5000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "review_service",
      "subscribers": [
        { "topic_name": "order_fulfilled", "msg_type": "fulfillment_info" },
        { "topic_name": "user_events", "msg_type": "user_activity" }
      ],
      "publishers": [
        {
          "topic_name": "product_reviews",
          "msg_type": "review_data",
          "period_ms": 10000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT_LOCAL",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "customer_support_service",
      "subscribers": [
        { "topic_name": "order_placed", "msg_type": "order_details" },
        { "topic_name": "shipment_tracking", "msg_type": "tracking_info" },
        { "topic_name": "payment_confirmed", "msg_type": "payment_receipt" }
      ],
      "publishers": [
        {
          "topic_name": "support_tickets",
          "msg_type": "ticket_data",
          "period_ms": 30000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "PERSISTENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "api_gateway",
      "subscribers": [
        { "topic_name": "auth_tokens", "msg_type": "jwt_token" },
        { "topic_name": "recommendations", "msg_type": "product_recommendations" },
        { "topic_name": "search_index_updates", "msg_type": "search_index_data" }
      ],
      "publishers": [
        {
          "topic_name": "api_metrics",
          "msg_type": "api_usage_data",
          "period_ms": 1000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "BEST_EFFORT"
          }
        }
      ]
    },

    {
      "node_name": "cache_service",
      "subscribers": [
        { "topic_name": "product_updates", "msg_type": "product_info" },
        { "topic_name": "price_updates", "msg_type": "pricing_info" },
        { "topic_name": "user_preferences", "msg_type": "preference_data" }
      ],
      "publishers": [
        {
          "topic_name": "cache_invalidation",
          "msg_type": "cache_update_event",
          "period_ms": 100,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "VOLATILE",
            "reliability": "RELIABLE"
          }
        }
      ]
    },

    {
      "node_name": "monitoring_service",
      "subscribers": [
        { "topic_name": "api_metrics", "msg_type": "api_usage_data" },
        { "topic_name": "fraud_alerts", "msg_type": "fraud_detection_result" },
        { "topic_name": "stock_alerts", "msg_type": "low_stock_warning" }
      ],
      "publishers": [
        {
          "topic_name": "system_alerts",
          "msg_type": "monitoring_alert",
          "period_ms": 5000,
          "msg_pass_by": "shared_ptr",
          "qos": {
            "durability": "TRANSIENT",
            "reliability": "RELIABLE"
          }
        }
      ]
    }
  ],

  "infrastructure": {
    "nodes": [
      {
        "node_id": "node_1",
        "node_type": "compute",
        "region": "us-east-1a",
        "services": ["order_service", "payment_service", "inventory_service"]
      },
      {
        "node_id": "node_2",
        "node_type": "compute",
        "region": "us-east-1b",
        "services": ["user_service", "auth_service", "cart_service"]
      },
      {
        "node_id": "node_3",
        "node_type": "compute",
        "region": "us-east-1a",
        "services": ["shipping_service", "warehouse_service", "notification_service"]
      },
      {
        "node_id": "node_4",
        "node_type": "compute",
        "region": "us-east-1b",
        "services": ["recommendation_service", "analytics_service", "search_service"]
      },
      {
        "node_id": "node_5",
        "node_type": "compute",
        "region": "us-east-1a",
        "services": ["api_gateway", "cache_service", "monitoring_service"]
      },
      {
        "node_id": "node_6",
        "node_type": "compute",
        "region": "us-east-1b",
        "services": ["product_service", "pricing_service", "review_service", "customer_support_service", "fraud_detection_service"]
      }
    ]
  }
}